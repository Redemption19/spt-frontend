"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4299],{34299:function(e,s,t){t.d(s,{default:function(){return k}});var r=t(57437),n=t(2265),a=t(68954),l=t(74697),i=t(83852),o=t(17583),c=t(99687),d=t(29338),m=t(87592),x=t(6540),h=t(40933),u=t(26164),g=t(22023),p=t(52022),b=t(60994),f=t(54817),j=t(81822),y=t(1296),w=t(90027),N=t(94633);function v(e){let{content:s,className:t=""}=e;return(0,r.jsx)("div",{className:"overflow-hidden ".concat(t),children:(0,r.jsx)(w.UG,{remarkPlugins:[N.Z],components:{p:e=>{let{node:s,...t}=e;return(0,r.jsx)("p",{className:"mb-2 leading-relaxed break-words",...t})},h1:e=>{let{node:s,...t}=e;return(0,r.jsx)("h1",{className:"text-xl font-bold mb-2",...t})},h2:e=>{let{node:s,...t}=e;return(0,r.jsx)("h2",{className:"text-lg font-bold mb-2",...t})},h3:e=>{let{node:s,...t}=e;return(0,r.jsx)("h3",{className:"text-md font-bold mb-1",...t})},ul:e=>{let{node:s,...t}=e;return(0,r.jsx)("ul",{className:"list-disc ml-5 mb-2",...t})},ol:e=>{let{node:s,...t}=e;return(0,r.jsx)("ol",{className:"list-decimal ml-5 mb-2",...t})},li:e=>{let{node:s,...t}=e;return(0,r.jsx)("li",{className:"mb-1 break-words",...t})},a:e=>{let{node:s,...t}=e;return(0,r.jsx)("a",{className:"text-blue-500 underline break-words inline-block",...t})},blockquote:e=>{let{node:s,...t}=e;return(0,r.jsx)("blockquote",{className:"border-l-4 border-gray-300 pl-4 italic",...t})},code:e=>{let{inline:s,className:t,...n}=e;return s?(0,r.jsx)("code",{className:"bg-gray-200 dark:bg-gray-700 px-1 py-0.5 rounded ".concat(t||""),...n}):(0,r.jsx)("pre",{className:"bg-gray-200 dark:bg-gray-700 p-2 rounded overflow-x-auto my-2 text-xs",children:(0,r.jsx)("code",{className:t,...n})})},table:e=>{let{node:s,...t}=e;return(0,r.jsx)("div",{className:"overflow-x-auto my-2",children:(0,r.jsx)("table",{className:"min-w-full border-collapse",...t})})},th:e=>{let{node:s,...t}=e;return(0,r.jsx)("th",{className:"border border-gray-300 dark:border-gray-700 px-2 py-1 bg-gray-100 dark:bg-gray-800",...t})},td:e=>{let{node:s,...t}=e;return(0,r.jsx)("td",{className:"border border-gray-300 dark:border-gray-700 px-2 py-1",...t})}},children:s})})}function k(e){let{onClose:s}=e,[t,w]=(0,n.useState)([]),[N,k]=(0,n.useState)(""),[C,S]=(0,n.useState)(!1),[T,Z]=(0,n.useState)(!1),[P,E]=(0,n.useState)(!1),[H,D]=(0,n.useState)(""),[q,_]=(0,n.useState)("home"),[A,I]=(0,n.useState)(!1),[L,R]=(0,n.useState)(null),[W,M]=(0,n.useState)(null),[G,B]=(0,n.useState)([]),[F,z]=(0,n.useState)("No recent messages"),[O,Q]=(0,n.useState)(!1),[K,J]=(0,n.useState)(!1),[U,V]=(0,n.useState)(!1),[Y,X]=(0,n.useState)(null),[$,ee]=(0,n.useState)(""),[es,et]=(0,n.useState)(""),er=(0,n.useRef)(null),en=(0,n.useRef)(null),ea=(0,n.useRef)(null);(0,n.useRef)(null);let el=(0,n.useRef)(null);(0,n.useEffect)(()=>{(async()=>{try{await (0,y.Y)(),Z(!0)}catch(e){}})()},[]),(0,n.useEffect)(()=>{if(t.length>0){let e=t[t.length-1];"assistant"===e.role&&z(e.content.substring(0,50)+(e.content.length>50?"...":""))}},[t]);let ei=()=>{if(en.current){let e=en.current,s=e.scrollHeight-e.clientHeight;e.scrollTop=s>0?s:0,setTimeout(()=>{e&&(e.scrollTop=e.scrollHeight)},50),setTimeout(()=>{e&&(e.scrollTop=e.scrollHeight)},300)}};(0,n.useEffect)(()=>{ei();let e=setTimeout(()=>{ei()},100),s=setTimeout(()=>{ei()},500),t=setTimeout(()=>{ei()},1e3);return()=>{clearTimeout(e),clearTimeout(s),clearTimeout(t)}},[t,H]),(0,n.useEffect)(()=>{let e=ea.current;if(e){e.style.height="auto";let s=Math.min(Math.max(e.scrollHeight,40),200);e.style.height="".concat(s,"px"),e.style.transition="height 0.2s ease-out"}},[$]);let eo=async(e,s)=>{e.preventDefault();let r=s||N;if(!r.trim()||C)return;let n={role:"user",content:r};w(e=>[...e,n]),ee(""),S(!0),Q(!0),J(!0),D(""),setTimeout(()=>{ea.current&&(ea.current.style.height="40px")},100),w(e=>[...e,{role:"assistant",content:"Thinking..."}]);try{var a,l,i,o;E(!0),w(e=>[...e.slice(0,-1),{role:"assistant",content:"Searching knowledge base..."}]);let e=T?await (0,y.l)(r,3):[];E(!1),J(!1),w(e=>e.slice(0,e.length-1));let s=[];if(e.length>0){let t=window.location.origin,r="\n  Here is relevant information from the SPT Pension Trust website:\n  \n  ".concat(e.map(e=>"[PAGE: ".concat(e.route,"](").concat(t).concat(e.route,")\n  ").concat(e.content,"\n  ")).join("\n---\n"),"\n  \n  Please use the above information to provide an accurate and specific answer. When referencing specific schemes or pages, use proper markdown links like [Page Name](").concat(t,"/path) instead of just showing the path.");s.push({role:"system",content:r})}let c=[...s,...t.filter(e=>"assistant"!==e.role||"Searching for information..."!==e.content),n],d=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:c,stream:!0})});if(!d.ok)throw Error("Request failed with status ".concat(d.status));let m=null===(a=d.body)||void 0===a?void 0:a.getReader();if(!m)throw Error("Response body is not readable");V(!0),Q(!1),w(e=>[...e,{role:"assistant",content:"Generating response..."}]);let x="",h="";for(;;){let{done:e,value:s}=await m.read();if(e)break;for(let e of new TextDecoder().decode(s).split("\n").filter(e=>""!==e.trim()))if(e.startsWith("data: ")){let s=e.substring(6);if("[DONE]"===s)continue;try{let e=JSON.parse(s),t=(null===(o=e.choices)||void 0===o?void 0:null===(i=o[0])||void 0===i?void 0:null===(l=i.delta)||void 0===l?void 0:l.content)||"";t&&(x+=t,h+=t,D(x),x.length===t.length&&w(e=>e.filter(e=>"Generating response..."!==e.content)),setTimeout(()=>{ei()},50))}catch(e){}}}h&&w(e=>[...e.filter(e=>"user"===e.role||!["Thinking...","Searching knowledge base...","Generating response..."].includes(e.content)),{role:"assistant",content:h}]),D("")}catch(e){w(e=>[...e.filter(e=>"user"===e.role||!["Thinking...","Searching knowledge base...","Generating response..."].includes(e.content)),{role:"assistant",content:"Sorry, I encountered an error while processing your request. Please try again."}])}finally{S(!1),Q(!1),J(!1),V(!1),D(""),setTimeout(()=>{ei()},300)}},ec=e=>{let s=e.target.value.toLowerCase();if(s.length<2){B([]);return}let t=[];j.KI.forEach(e=>{e.articles.forEach(e=>{(e.title.toLowerCase().includes(s)||e.content.toLowerCase().includes(s))&&t.push(e)})}),B(t),R(null),M(null)},ed=e=>{R(e),M(null),B([])},em=e=>{switch(e){case"contribution":X("contribution");break;case"enrollment":X("enrollment");break;case"faqs":X("faqs")}},ex=()=>{$.trim()&&(eo(new Event("submit"),$),ee(""))},eh=e=>{X(null),_("chat"),k(e),setTimeout(()=>{eo({preventDefault:()=>{}},e)},100)},eu=e=>{et(e),ec({target:{value:e}})},eg=e=>{M(e)};return(0,r.jsxs)("div",{className:"fixed bottom-4 right-4 left-4 sm:left-auto sm:w-96 w-auto h-[500px] sm:h-[600px] bg-white rounded-lg shadow-2xl border border-gray-200 flex flex-col z-50 max-h-[90vh]",children:[(0,r.jsxs)("div",{className:"bg-red-700 text-white p-3 sm:p-4 rounded-t-lg flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-white/20 rounded-full flex items-center justify-center",children:(0,r.jsx)(a.Z,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-base sm:text-lg",children:"SPT Assistant"}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-red-200",children:"Pension Planning Partner"})]})]}),(0,r.jsx)("button",{onClick:s,className:"text-white/80 hover:text-white transition-colors p-1",children:(0,r.jsx)(l.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),(0,r.jsx)("div",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("button",{onClick:()=>_("home"),className:"flex-1 flex flex-col items-center justify-center py-2 sm:py-3 px-1 sm:px-2 transition-all duration-200 ".concat("home"===q?"text-red-700 bg-white border-b-2 border-red-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 sm:h-5 sm:w-5 mb-1"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Home"})]}),(0,r.jsxs)("button",{onClick:()=>_("chat"),className:"flex-1 flex flex-col items-center justify-center py-2 sm:py-3 px-1 sm:px-2 transition-all duration-200 ".concat("chat"===q?"text-red-700 bg-white border-b-2 border-red-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[(0,r.jsx)(o.Z,{className:"h-4 w-4 sm:h-5 sm:w-5 mb-1"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Chat"})]}),(0,r.jsxs)("button",{onClick:()=>_("help"),className:"flex-1 flex flex-col items-center justify-center py-2 sm:py-3 px-1 sm:px-2 transition-all duration-200 ".concat("help"===q?"text-red-700 bg-white border-b-2 border-red-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 sm:h-5 sm:w-5 mb-1"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Help"})]})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-hidden",children:["home"===q&&(0,r.jsxs)("div",{className:"h-full overflow-y-auto p-3 sm:p-4 space-y-3 sm:space-y-4 bg-gray-50",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 bg-red-100 rounded-full mb-3 sm:mb-4 border-2 border-red-200",children:(0,r.jsx)(d.Z,{className:"h-6 w-6 sm:h-8 sm:w-8 text-red-700"})}),(0,r.jsx)("h2",{className:"font-bold text-lg sm:text-xl text-gray-800 mb-2",children:"How can we help?"}),(0,r.jsx)("p",{className:"text-gray-600 text-xs sm:text-sm",children:"Get expert guidance on your pension journey"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3 sm:p-4 hover:shadow-md transition-all duration-200 cursor-pointer",onClick:()=>_("chat"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,r.jsx)("div",{className:"bg-blue-500 p-1.5 sm:p-2 rounded-lg",children:(0,r.jsx)(o.Z,{className:"h-4 w-4 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-blue-900 text-sm",children:"Start Chat"}),(0,r.jsx)("p",{className:"text-blue-700 text-xs",children:"Get personalized help"})]})]}),(0,r.jsx)(m.Z,{className:"h-4 w-4 text-blue-500"})]})}),(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 sm:p-4 hover:shadow-md transition-all duration-200 cursor-pointer",onClick:()=>_("help"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,r.jsx)("div",{className:"bg-green-500 p-1.5 sm:p-2 rounded-lg",children:(0,r.jsx)(x.Z,{className:"h-4 w-4 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-green-900 text-sm",children:"Help Center"}),(0,r.jsx)("p",{className:"text-green-700 text-xs",children:"Browse articles & guides"})]})]}),(0,r.jsx)(m.Z,{className:"h-4 w-4 text-green-500"})]})})]}),(0,r.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-3 sm:p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-orange-800 text-sm",children:"Office Hours"}),(0,r.jsx)("p",{className:"text-orange-700 text-xs",children:"Mon - Fri: 8:00 AM - 5:00 PM"})]})]})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("button",{onClick:()=>em("contribution"),className:"w-full bg-red-50 hover:bg-red-100 p-3 rounded-lg border border-red-200 transition-colors cursor-pointer",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(u.Z,{className:"w-5 h-5 text-red-600"})}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("h4",{className:"font-medium text-red-800",children:"Contribution Information"}),(0,r.jsx)("p",{className:"text-sm text-red-600",children:"View our transparent contribution structure"})]})]})}),(0,r.jsx)("button",{onClick:()=>em("enrollment"),className:"w-full bg-green-50 hover:bg-green-100 p-3 rounded-lg border border-green-200 transition-colors cursor-pointer",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(g.Z,{className:"w-5 h-5 text-green-600"})}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("h4",{className:"font-medium text-green-800",children:"Enrollment Guide"}),(0,r.jsx)("p",{className:"text-sm text-green-600",children:"Start your pension journey today"})]})]})}),(0,r.jsx)("button",{onClick:()=>em("faqs"),className:"w-full bg-blue-50 hover:bg-blue-100 p-3 rounded-lg border border-blue-200 transition-colors cursor-pointer",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(c.Z,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("h4",{className:"font-medium text-blue-800",children:"Quick FAQs"}),(0,r.jsx)("p",{className:"text-sm text-blue-600",children:"Get instant answers to common questions"})]})]})})]})]}),"chat"===q&&(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-3 sm:space-y-4 bg-gray-50 min-h-0",children:[t.map((e,s)=>(0,r.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"flex items-end space-x-2 max-w-[80%] ".concat("user"===e.role?"flex-row-reverse space-x-reverse":"flex-row"),children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-medium flex-shrink-0 ".concat("user"===e.role?"bg-red-600":"bg-red-700"),children:"user"===e.role?(0,r.jsx)(p.Z,{className:"w-4 h-4"}):(0,r.jsx)(a.Z,{className:"w-4 h-4"})}),(0,r.jsx)("div",{className:"flex flex-col",children:(0,r.jsx)("div",{className:"px-4 py-2 rounded-2xl ".concat("user"===e.role?"bg-red-600 text-white rounded-br-md":"bg-white text-gray-800 border border-gray-200 rounded-bl-md"),children:"assistant"===e.role?(0,r.jsx)(v,{content:e.content,className:"text-sm leading-relaxed"}):(0,r.jsx)("p",{className:"text-sm leading-relaxed",children:e.content})})})]})},e.id||s)),(O||K||U||H)&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-red-700 rounded-full flex items-center justify-center text-white flex-shrink-0 ".concat(K||U?"animate-pulse":""),children:(0,r.jsx)(a.Z,{className:"w-4 h-4"})}),(0,r.jsx)("div",{className:"bg-white border border-gray-200 px-4 py-2 rounded-2xl rounded-bl-md",children:H?(0,r.jsxs)("div",{className:"text-sm leading-relaxed",children:[(0,r.jsx)(v,{content:H,className:"text-sm leading-relaxed"}),(0,r.jsx)("div",{className:"inline-flex ml-1",children:(0,r.jsx)("div",{className:"w-1 h-4 bg-red-600 animate-pulse"})})]}):K?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,r.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:"Thinking..."})]}):P?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,r.jsx)("span",{className:"text-xs text-green-600 font-medium",children:"Searching..."})]}):U?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,r.jsx)("span",{className:"text-xs text-purple-600 font-medium",children:"Generating..."})]}):(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),(0,r.jsx)("div",{ref:er})]}),(0,r.jsx)("div",{className:"px-4 py-2 border-t border-gray-200 bg-white flex-shrink-0",children:(0,r.jsxs)("div",{className:"flex space-x-2 text-xs",children:[(0,r.jsxs)("button",{onClick:()=>em("contribution"),className:"px-3 py-1 bg-red-100 text-red-700 rounded-full hover:bg-red-200 transition-colors cursor-pointer flex items-center gap-1",children:[(0,r.jsx)(u.Z,{className:"w-3 h-3"}),"Contribution"]}),(0,r.jsxs)("button",{onClick:()=>em("enrollment"),className:"px-3 py-1 bg-green-100 text-green-700 rounded-full hover:bg-green-200 transition-colors cursor-pointer flex items-center gap-1",children:[(0,r.jsx)(x.Z,{className:"w-3 h-3"}),"Enrollment"]}),(0,r.jsxs)("button",{onClick:()=>em("faqs"),className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200 transition-colors cursor-pointer flex items-center gap-1",children:[(0,r.jsx)(c.Z,{className:"w-3 h-3"}),"FAQs"]})]})}),Y&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-sm sm:max-w-md w-full max-h-[70vh] sm:max-h-[80vh] overflow-hidden animate-in fade-in-0 zoom-in-95 duration-200",children:[(0,r.jsxs)("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 bg-gradient-to-r from-red-50 to-pink-50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-800",children:"contribution"===Y?(0,r.jsxs)("span",{className:"flex items-center gap-1 sm:gap-2",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Contribution Questions"}),(0,r.jsx)("span",{className:"sm:hidden",children:"Contribution"})]}):"enrollment"===Y?(0,r.jsxs)("span",{className:"flex items-center gap-1 sm:gap-2",children:[(0,r.jsx)(g.Z,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Enrollment Questions"}),(0,r.jsx)("span",{className:"sm:hidden",children:"Enrollment"})]}):(0,r.jsxs)("span",{className:"flex items-center gap-1 sm:gap-2",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Frequently Asked Questions"}),(0,r.jsx)("span",{className:"sm:hidden",children:"FAQs"})]})}),(0,r.jsx)("button",{onClick:()=>X(null),className:"p-1 hover:bg-gray-200 rounded-full transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Select a question to ask our AI assistant"})]}),(0,r.jsx)("div",{className:"px-4 sm:px-6 py-3 sm:py-4 max-h-64 sm:max-h-96 overflow-y-auto",children:(0,r.jsx)("div",{className:"space-y-2 sm:space-y-3",children:({contribution:["What are your management fees and charges?","How do contribution rates work for different schemes?","What is the minimum contribution amount?","Can I increase or decrease my contributions?","Are there any penalties for late contributions?","How are my contributions invested?"],enrollment:["How do I enroll as an individual member?","What documents do I need for enrollment?","Can my employer enroll me automatically?","What is the minimum age for enrollment?","How long does the enrollment process take?","Can I enroll in multiple pension schemes?"],faqs:["How do I check my pension balance online?","When can I withdraw my pension funds?","What happens to my pension if I change jobs?","How do I update my personal information?","What are the tax benefits of pension contributions?","How do I claim my pension benefits?"]})[Y].map((e,s)=>(0,r.jsx)("button",{onClick:()=>eh(e),className:"w-full text-left p-3 sm:p-4 bg-gray-50 hover:bg-red-50 border border-gray-200 hover:border-red-300 rounded-lg transition-all duration-200 hover:shadow-md group",children:(0,r.jsxs)("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[(0,r.jsx)("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-red-100 group-hover:bg-red-200 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,r.jsx)("span",{className:"text-red-600 text-xs sm:text-sm font-medium",children:s+1})}),(0,r.jsx)("span",{className:"text-sm sm:text-base text-gray-800 group-hover:text-red-700 font-medium leading-relaxed",children:e})]})},s))})}),(0,r.jsx)("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-t border-gray-200 bg-gray-50",children:(0,r.jsx)("button",{onClick:()=>X(null),className:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base text-gray-600 hover:text-gray-800 border border-gray-300 hover:border-gray-400 rounded-lg transition-colors",children:"Cancel"})})]})}),(0,r.jsxs)("div",{className:"p-3 sm:p-4 border-t border-gray-200 bg-white rounded-b-lg flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("textarea",{ref:ea,value:$,onChange:e=>ee(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ex())},placeholder:C?"Please wait...":"Type your message here...",rows:1,disabled:C,className:"flex-1 px-3 sm:px-4 py-2 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-red-700 focus:border-transparent resize-none overflow-y-auto min-h-[40px] max-h-[200px] ".concat(C?"bg-gray-100 cursor-not-allowed opacity-60":""),style:{lineHeight:"1.5",transition:"height 0.2s ease-out"}}),(0,r.jsx)("button",{onClick:ex,disabled:!$.trim()||C,className:"p-1.5 sm:p-2 rounded-full transition-colors ".concat(C?"bg-gray-300 cursor-not-allowed":$.trim()?"bg-red-700 hover:bg-red-800":"bg-gray-300 cursor-not-allowed"," text-white"),children:C?(0,r.jsx)("div",{className:"w-4 h-4 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,r.jsx)(b.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),(0,r.jsx)("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Press Enter to send, Shift+Enter for new line"})]})]}),"help"===q&&(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsx)("div",{className:"p-3 sm:p-4 border-b border-gray-200 bg-white",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,r.jsx)("input",{ref:el,type:"text",placeholder:"Search help articles...",value:es,onChange:e=>eu(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-700 focus:border-red-700 bg-white text-gray-800 placeholder-gray-500 text-sm"})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4",children:[es&&G.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h3",{className:"font-semibold text-lg text-gray-800 mb-3",children:["Search Results (",G.length,")"]}),(0,r.jsx)("div",{className:"space-y-3",children:G.map(e=>(0,r.jsxs)("div",{onClick:()=>eg(e),className:"bg-white p-4 rounded-lg border border-gray-200 hover:border-red-300 hover:shadow-md cursor-pointer transition-all",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800 mb-1",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.category}),(0,r.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2",children:e.content})]},e.id))})]}),es&&0===G.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(x.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,r.jsx)("h3",{className:"font-medium text-gray-600 mb-2",children:"No articles found"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Try different keywords or browse our categories below"})]}),W&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex items-center space-x-2 mb-4",children:(0,r.jsxs)("button",{onClick:()=>{M(null)},className:"text-red-600 hover:text-red-700 text-sm font-medium",children:["← Back to ",W.category]})}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-3",children:W.title}),(0,r.jsx)("div",{className:"bg-red-50 text-red-700 px-3 py-1 rounded-full text-sm font-medium inline-block mb-4",children:W.category}),(0,r.jsx)("p",{className:"text-gray-700 leading-relaxed",children:W.content})]})]}),L&&!W&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex items-center space-x-2 mb-4",children:(0,r.jsx)("button",{onClick:()=>{R(null),M(null),B([])},className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"← Back to Categories"})}),(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:L.title}),(0,r.jsx)("div",{className:"space-y-3",children:L.articles.map(e=>(0,r.jsxs)("div",{onClick:()=>eg(e),className:"bg-white p-4 rounded-lg border border-gray-200 hover:border-red-300 hover:shadow-md cursor-pointer transition-all",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2",children:e.content})]},e.id))})]}),!L&&!W&&!es&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("div",{className:"bg-gradient-to-br from-red-100 to-pink-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 border-4 border-red-200 flex items-center justify-center",children:(0,r.jsx)(x.Z,{className:"h-8 w-8 text-red-600"})}),(0,r.jsx)("h3",{className:"font-bold text-xl text-gray-800 mb-2",children:"Help Center"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Browse our comprehensive help articles and guides"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-3",children:j.KI.map(e=>(0,r.jsx)("div",{onClick:()=>ed(e),className:"bg-white p-4 rounded-lg border border-gray-200 hover:border-red-300 hover:shadow-md cursor-pointer transition-all",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(x.Z,{className:"h-5 w-5 text-red-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800",children:e.title}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e.articleCount," articles"]})]})]}),(0,r.jsx)(m.Z,{className:"h-5 w-5 text-gray-400"})]})},e.id))})]})]})]})]})]})}},1296:function(e,s,t){function r(e){let s=e.toLowerCase().trim(),t=Array(100).fill(0);for(let e=0;e<s.length;e++){let r=s.charCodeAt(e);t[r%t.length]+=1}let r=Math.sqrt(t.reduce((e,s)=>e+s*s,0));if(r>0)for(let e=0;e<t.length;e++)t[e]=t[e]/r;return t}t.d(s,{Y:function(){return o},l:function(){return c}});var n=t(36976);let a=[],l=!1,i={};async function o(){if(!l)try{let[e,s]=await Promise.all([fetch("/knowledge-base.merged.json").then(e=>e.ok?e.json():[]),(0,n.rx)()]),t=e.map(e=>({id:"existing_".concat(e.id),path:e.path||"",route:e.route||"",content:e.content||"",keywords:e.keywords||[],title:e.title||"",category:e.category||"general",embedding:r(e.content||"")})),i=s.map(e=>({id:"new_".concat(e.id),path:"/knowledge/".concat(e.category,".json"),route:"/knowledge/".concat(e.category),content:e.content,keywords:e.keywords,title:e.title,category:e.category,embedding:r(e.content)}));a=[...t,...i],l=!0}catch(e){throw e}}async function c(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;l||await o();let t=e.trim().toLowerCase(),n="".concat(t,"_").concat(s);if(i[n])return i[n];let c=t.split(/\s+/).filter(e=>e.length>2),d=r(e),m=a.map(e=>{let s=function(e,s){if(e.length!==s.length)throw Error("Vectors must be of the same length");let t=0,r=0,n=0;for(let a=0;a<e.length;a++)t+=e[a]*s[a],r+=e[a]*e[a],n+=s[a]*s[a];return(r=Math.sqrt(r),n=Math.sqrt(n),0===r||0===n)?0:t/(r*n)}(d,e.embedding),t=0;if(e.keywords&&Array.isArray(e.keywords))for(let s of e.keywords)c.includes(s.toLowerCase())&&(t+=.15);return e.title&&c.some(s=>(e.title||"").toLowerCase().includes(s))&&(t+=.15),e.category&&c.some(s=>(e.category||"").toLowerCase().includes(s))&&(t+=.1),e.route&&c.some(s=>e.route.toLowerCase().includes(s))&&(t+=.05),{item:e,score:s+t}}).sort((e,s)=>s.score-e.score).slice(0,s).map(e=>e.item);return i[n]=m,m}},36976:function(e,s,t){t.d(s,{W9:function(){return l},qS:function(){return a},rx:function(){return n}});let r=[{name:"Core Knowledge Base",path:"/spt-comprehensive-knowledge.json",description:"Main company and scheme information"},{name:"Psychological Planning",path:"/knowledge/psychological-faqs.json",description:"Behavioral and psychological aspects of pension planning"},{name:"Contribution Strategies",path:"/knowledge/contribution-strategies.json",description:"Optimization and strategies for pension contributions"},{name:"Investment Strategies",path:"/knowledge/investment-strategies.json",description:"Portfolio management and investment guidance"},{name:"Benefit Claims & Withdrawals",path:"/knowledge/benefit-claims.json",description:"Retirement benefit claiming and withdrawal strategies"},{name:"Digital Services & Technology",path:"/knowledge/digital-services.json",description:"Digital platform features and technology support"},{name:"Regulatory & Compliance",path:"/knowledge/regulatory-compliance.json",description:"NPRA oversight and regulatory protections"},{name:"Family & Life Planning",path:"/knowledge/family-life-planning.json",description:"Family coordination and life event planning"},{name:"Informal Sector & Specialized Workers",path:"/knowledge/informal-sector.json",description:"Pension planning for informal sector workers"},{name:"Financial Trauma & Recovery",path:"/knowledge/financial-trauma.json",description:"Overcoming financial trauma and building confidence"},{name:"Healthcare & Medical Planning",path:"/knowledge/healthcare-planning.json",description:"Healthcare costs and medical planning in retirement"},{name:"Cybersecurity & Digital Safety",path:"/knowledge/cybersecurity.json",description:"Digital security and fraud protection"},{name:"Crisis & Emergency Planning",path:"/knowledge/crisis-emergency.json",description:"Emergency preparedness and crisis management"}];async function n(){let e=[];try{for(let s of r)try{let t=await fetch(s.path);if(t.ok){let r=(await t.json()).map(e=>({...e,id:"".concat(s.name.toLowerCase().replace(/\s+/g,"_"),"_").concat(e.id)}));e.push(...r)}}catch(e){}return e.sort((e,s)=>new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()),e}catch(e){return[]}}function a(e){return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function l(e){return({company_overview:"bg-blue-100 text-blue-800",pension_schemes:"bg-green-100 text-green-800",schemes:"bg-green-100 text-green-800",faq:"bg-purple-100 text-purple-800",leadership:"bg-orange-100 text-orange-800",trustees:"bg-orange-100 text-orange-800",enrollment:"bg-red-100 text-red-800",claims:"bg-indigo-100 text-indigo-800",member_services:"bg-pink-100 text-pink-800",tax_benefits:"bg-yellow-100 text-yellow-800",investment_management:"bg-teal-100 text-teal-800",investment_strategies:"bg-teal-100 text-teal-800",psychological_planning:"bg-purple-100 text-purple-800",contribution_strategies:"bg-emerald-100 text-emerald-800"})[e]||"bg-gray-100 text-gray-800"}}}]);