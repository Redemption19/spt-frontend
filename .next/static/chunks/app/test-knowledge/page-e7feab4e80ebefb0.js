(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9141],{93824:function(e,t,n){Promise.resolve().then(n.bind(n,55598))},55598:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n(57437),r=n(2265),a=n(36976),i=n(1296);function l(){let[e,t]=(0,r.useState)([]),[n,l]=(0,r.useState)([]),[o,c]=(0,r.useState)([]),[d,g]=(0,r.useState)([]),[h,m]=(0,r.useState)(""),[p,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{u(!0);try{let e=await fetch("/knowledge-base.merged.json");if(e.ok){let n=await e.json();t(n)}let n=await (0,a.rx)();l(n),await (0,i.Y)();let s=await (0,i.l)("pension schemes",5);g(s)}catch(e){}finally{u(!1)}})()},[]);let x=async()=>{if(h.trim()){u(!0);try{let e=await (0,i.l)(h,5);g(e)}catch(e){}finally{u(!1)}}};return(0,s.jsxs)("div",{className:"container mx-auto p-6 max-w-6xl",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Knowledge Base Test Page"}),p&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-blue-800",children:"\uD83D\uDD04 Loading and testing knowledge bases..."})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"\uD83D\uDCDA Existing Knowledge Base"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Your original knowledge-base.merged.json file"}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Total Items:"})," ",e.length]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Status:"})," ",e.length>0?"✅ Loaded":"❌ Not loaded"]})]}),e.length>0&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-2",children:"Sample Items:"}),(0,s.jsx)("div",{className:"space-y-2",children:e.slice(0,3).map((e,t)=>(0,s.jsxs)("div",{className:"text-xs bg-white p-2 rounded border",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"ID:"})," ",e.id]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Title:"})," ",e.title]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Category:"})," ",e.category]})]},t))})]})]}),(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"\uD83C\uDD95 New Knowledge Base"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Additional knowledge from new-knowledge.md"}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Total Items:"})," ",n.length]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Status:"})," ",n.length>0?"✅ Loaded":"❌ Not loaded"]})]}),n.length>0&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-2",children:"Sample Items:"}),(0,s.jsx)("div",{className:"space-y-2",children:n.slice(0,3).map((e,t)=>(0,s.jsxs)("div",{className:"text-xs bg-white p-2 rounded border",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"ID:"})," ",e.id]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Title:"})," ",e.title]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Category:"})," ",e.category]})]},t))})]})]})]}),(0,s.jsxs)("div",{className:"border rounded-lg p-4 mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"\uD83D\uDD17 Combined Knowledge Base"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Total items available for search and chatbot"}),(0,s.jsxs)("div",{className:"bg-green-50 p-3 rounded",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Total Combined Items:"})," ",e.length+n.length]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Status:"})," ",d.length>0?"✅ Working":"❌ Not working"]})]})]}),(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"\uD83D\uDD0D Search Test"}),(0,s.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,s.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"Enter search query (e.g., 'pension schemes', 'tax benefits')",className:"flex-1 px-3 py-2 border rounded-lg"}),(0,s.jsx)("button",{onClick:x,disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Search"})]}),d.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Found ",d.length,' results for "',h,'"']}),(0,s.jsx)("div",{className:"space-y-3",children:d.map((e,t)=>(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded border",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"ID:"})," ",e.id]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Title:"})," ",e.title]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Category:"})," ",e.category]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Content Preview:"})," ",e.content.substring(0,100),"..."]})]},t))})]})]}),(0,s.jsxs)("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold text-yellow-800 mb-2",children:"\uD83D\uDCCB What This Test Shows:"}),(0,s.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,s.jsx)("li",{children:"• Whether your existing knowledge base is loading correctly"}),(0,s.jsx)("li",{children:"• Whether the new knowledge base is loading correctly"}),(0,s.jsx)("li",{children:"• Whether both are combined and searchable"}),(0,s.jsx)("li",{children:"• Whether the chatbot can access all knowledge"})]})]})]})}},1296:function(e,t,n){"use strict";function s(e){let t=e.toLowerCase().trim(),n=Array(100).fill(0);for(let e=0;e<t.length;e++){let s=t.charCodeAt(e);n[s%n.length]+=1}let s=Math.sqrt(n.reduce((e,t)=>e+t*t,0));if(s>0)for(let e=0;e<n.length;e++)n[e]=n[e]/s;return n}n.d(t,{Y:function(){return o},l:function(){return c}});var r=n(36976);let a=[],i=!1,l={};async function o(){if(!i)try{let[e,t]=await Promise.all([fetch("/knowledge-base.merged.json").then(e=>e.ok?e.json():[]),(0,r.rx)()]),n=e.map(e=>({id:"existing_".concat(e.id),path:e.path||"",route:e.route||"",content:e.content||"",keywords:e.keywords||[],title:e.title||"",category:e.category||"general",embedding:s(e.content||"")})),l=t.map(e=>({id:"new_".concat(e.id),path:"/knowledge/".concat(e.category,".json"),route:"/knowledge/".concat(e.category),content:e.content,keywords:e.keywords,title:e.title,category:e.category,embedding:s(e.content)}));a=[...n,...l],i=!0}catch(e){throw e}}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;i||await o();let n=e.trim().toLowerCase(),r="".concat(n,"_").concat(t);if(l[r])return l[r];let c=n.split(/\s+/).filter(e=>e.length>2),d=s(e),g=a.map(e=>{let t=function(e,t){if(e.length!==t.length)throw Error("Vectors must be of the same length");let n=0,s=0,r=0;for(let a=0;a<e.length;a++)n+=e[a]*t[a],s+=e[a]*e[a],r+=t[a]*t[a];return(s=Math.sqrt(s),r=Math.sqrt(r),0===s||0===r)?0:n/(s*r)}(d,e.embedding),n=0;if(e.keywords&&Array.isArray(e.keywords))for(let t of e.keywords)c.includes(t.toLowerCase())&&(n+=.15);return e.title&&c.some(t=>(e.title||"").toLowerCase().includes(t))&&(n+=.15),e.category&&c.some(t=>(e.category||"").toLowerCase().includes(t))&&(n+=.1),e.route&&c.some(t=>e.route.toLowerCase().includes(t))&&(n+=.05),{item:e,score:t+n}}).sort((e,t)=>t.score-e.score).slice(0,t).map(e=>e.item);return l[r]=g,g}},36976:function(e,t,n){"use strict";n.d(t,{W9:function(){return i},qS:function(){return a},rx:function(){return r}});let s=[{name:"Core Knowledge Base",path:"/spt-comprehensive-knowledge.json",description:"Main company and scheme information"},{name:"Psychological Planning",path:"/knowledge/psychological-faqs.json",description:"Behavioral and psychological aspects of pension planning"},{name:"Contribution Strategies",path:"/knowledge/contribution-strategies.json",description:"Optimization and strategies for pension contributions"},{name:"Investment Strategies",path:"/knowledge/investment-strategies.json",description:"Portfolio management and investment guidance"},{name:"Benefit Claims & Withdrawals",path:"/knowledge/benefit-claims.json",description:"Retirement benefit claiming and withdrawal strategies"},{name:"Digital Services & Technology",path:"/knowledge/digital-services.json",description:"Digital platform features and technology support"},{name:"Regulatory & Compliance",path:"/knowledge/regulatory-compliance.json",description:"NPRA oversight and regulatory protections"},{name:"Family & Life Planning",path:"/knowledge/family-life-planning.json",description:"Family coordination and life event planning"},{name:"Informal Sector & Specialized Workers",path:"/knowledge/informal-sector.json",description:"Pension planning for informal sector workers"},{name:"Financial Trauma & Recovery",path:"/knowledge/financial-trauma.json",description:"Overcoming financial trauma and building confidence"},{name:"Healthcare & Medical Planning",path:"/knowledge/healthcare-planning.json",description:"Healthcare costs and medical planning in retirement"},{name:"Cybersecurity & Digital Safety",path:"/knowledge/cybersecurity.json",description:"Digital security and fraud protection"},{name:"Crisis & Emergency Planning",path:"/knowledge/crisis-emergency.json",description:"Emergency preparedness and crisis management"}];async function r(){let e=[];try{for(let t of s)try{let n=await fetch(t.path);if(n.ok){let s=(await n.json()).map(e=>({...e,id:"".concat(t.name.toLowerCase().replace(/\s+/g,"_"),"_").concat(e.id)}));e.push(...s)}}catch(e){}return e.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),e}catch(e){return[]}}function a(e){return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function i(e){return({company_overview:"bg-blue-100 text-blue-800",pension_schemes:"bg-green-100 text-green-800",schemes:"bg-green-100 text-green-800",faq:"bg-purple-100 text-purple-800",leadership:"bg-orange-100 text-orange-800",trustees:"bg-orange-100 text-orange-800",enrollment:"bg-red-100 text-red-800",claims:"bg-indigo-100 text-indigo-800",member_services:"bg-pink-100 text-pink-800",tax_benefits:"bg-yellow-100 text-yellow-800",investment_management:"bg-teal-100 text-teal-800",investment_strategies:"bg-teal-100 text-teal-800",psychological_planning:"bg-purple-100 text-purple-800",contribution_strategies:"bg-emerald-100 text-emerald-800"})[e]||"bg-gray-100 text-gray-800"}}},function(e){e.O(0,[2971,7023,1744],function(){return e(e.s=93824)}),_N_E=e.O()}]);